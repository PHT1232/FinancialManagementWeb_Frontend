<ng-template pTemplate="header">
    <span class="text-xl font-bold">Chọn sản phẩm</span>
  </ng-template>
  <div class="calendar">
    <div class="row">
      <div class="input-group" style="width: 89%; left: 20px;">
        <div class="input-group-prepend">
          <button
            type="button"
            class="btn bg-blue"
            (click)="getDataPage(1)"
          >
            <i class="fas fa-search"></i>
          </button>
        </div>
        <input
          type="text"
          class="form-control"
          name="keyword"
          [placeholder]="'SearchWithThreeDot' "
          [(ngModel)]="keyword"
          (keyup.enter)="getDataPage(1)"
        />
      </div>
    </div>

  </div>
  <div class="row" style="margin-top: 90px">
    <div class="table-responsive">
      <p-table [value]="products" dataKey="productId" [(selection)]="selectedProductsForInput" 
      [scrollable]="true" 
      scrollHeight="450px" 
      [busy]="isTableLoading">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 4rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th>{{ "Mã sản phẩm"  }}</th>
              <th>{{ "Tên sản phẩm"  }}</th>
              <th>{{ "Số lượng"  }}</th>
              <th>{{ "Đơn vị tính"  }}</th>
              <th>{{ "Giá"  }}</th>
              <th>{{ "Đơn giá"  }}</th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-product>

            <tr>
              <td>
                <p-tableCheckbox [value]="product"></p-tableCheckbox>
              </td>
              <td>{{ product.productId }}</td>
              <td>{{ product.productName }}</td>
              <td style="width: 90px">
                <!-- <input
                  [disabled]="selectedProducts.length === 0"
                  min="1"
                  type="number"
                  class="form-control"
                  value="{{ product.quantity }}"
                  style="width: 80px"
                  [(ngModel)]="product.quantity"
                  [ngModelOptions]="{standalone: true}"
                  (change)="changeQuantity(product)"
                  /> -->
                  <input
                  [disabled]="!isProductSelectedInput(product)"
                  min="1"
                  type="number"
                  class="form-control"
                  value="{{ product.quantity }}"
                  style="width: 80px"
                  [(ngModel)]="product.quantity"
                  [ngModelOptions]="{standalone: true}"
                  />
              </td>
              <td>{{ product.unit }}</td>
              <td>{{ product.price | currency : "VND" }}</td>
              <td [innerHTML]="product.price * product.quantity | currency: 'VND'"></td>
              <!-- <td style="width: 35px">
                <input
                type="checkbox"
                class="form-control"
                (change)="AddItem(product, i)"
                style="width: 25px; height: 25px"
                />
              </td> -->
            </tr>
          </ng-template>
        </p-table>
      </div>
      <p-paginator
      (onPageChange)="getDataPage($event)"
      [first]="first"
      [rows]="rows"
      [totalRecords]="totalItems"
      [rowsPerPageOptions]="[10, 15, 20]"
    ></p-paginator>
    </div>
    <ng-template pTemplate="footer">
      <div class="modal-footer justify-content-center">
        <p-button
        type="button"
        label="Hủy"
        styleClass="p-button-outlined"
        (click)="closeModal()"
      ></p-button>
      <p-button icon="pi pi-check" (click)="visible = false; addProduct()" label="Ok" styleClass="p-button-text"></p-button>
    </div>
  </ng-template>